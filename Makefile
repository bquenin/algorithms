# =============================================================================
# DEFAULT TARGET
# =============================================================================
all: build


# =============================================================================
# BUILD
# =============================================================================
.PHONY: build
build: vet
	@echo "Building"
	CGO_ENABLED=0 go build ./...


# =============================================================================
# TEST
# =============================================================================
.PHONY: test
test:
	@echo "Testing..."
	CGO_ENABLED=0 go test -v ./...


# =============================================================================
# CLEAN
# =============================================================================
.PHONY: clean
clean:
	@echo "Cleaning up..."
	@rm -rf $(OUTPUT)


# =============================================================================
# VET
# =============================================================================
.PHONY: vet
vet: format lint


# =============================================================================
# FORMAT
# =============================================================================
.PHONY: format
format:
	@echo "Formatting..."
	@gofmt -s -w .


# =============================================================================
# LINT
# =============================================================================
.PHONY: lint
lint:
	@echo "Linting..."
	CGO_ENABLED=0 golangci-lint run --timeout 2m


# =============================================================================
# MODULES
# =============================================================================
.PHONY: mod-update
mod-update:
	@echo "Updating modules..."
	@go get -v ./...
	@go mod tidy
